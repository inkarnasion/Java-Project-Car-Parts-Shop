<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">>

<head>
    <th:block th:include="~{fragments/head}"></th:block>
</head>

<body>
<header>
    <th:block th:include="~{fragments/navbar}"></th:block>
</header>


<div class="container">

    <div class="row">

        <div class="col-lg-3">

            <h1 class="my-4">‚ÑÇùïíùï£ ‚Ñôùïíùï£ùï•ùï§</h1>

            <div class="list-group">
                <a id="bdParts" href="#" class="list-group-item">Body Parts</a>
                <div id="tst" style="display: none;">

                </div>


                <script th:inline="javascript">
                    $(document).ready(function () {
                        $('#bdParts').on('click', function () {
                            kur();
                        });
                        fetch('http://localhost:8000/categories/fetch')
                            .then((response) => response.json())
                            .then((json) => {
                                console.log(json);
                                let a = $("<ul id='ks'></ul>");
                                for (let i = 0; i < json.length; i++) {
                                    let id = json[i].id;
                                    a.append(`<li><a id="${id}" href="#">${json[i].name}</a></li>`);
                                    $(`#` + id).on('click', function () {
                                        console.log('herllo');
                                    });
                                }
                                $('#tst').append(a);

                            });

                        function kur() {
                            let contentDiv = $('#tst');
                            if (contentDiv.is(':visible')) {
                                contentDiv.hide();
                            } else {
                                contentDiv.show();
                            }
                        }

                        function asd(w) {
                            console.log(w)
                        }

                    });


                </script>
                <!--                <div class="products-navigation col-md-3">-->
                <!--                    <h2 class="font-weight-bold">Navigation</h2>-->
                <!--                    <form class="mt-3">-->
                <!--                        <div class="custom-control custom-radio mt-3">-->
                <!--                            <input type="radio" id="allRadio" name="selection"-->
                <!--                                   class="custom-control-input"-->
                <!--                                   value="all">-->
                <!--                            <label class="h4 custom-control-label" for="allRadio">All</label>-->
                <!--                        </div>-->
                <!--                        <th:block th:each="category : ${categories}" th:object="${category}">-->
                <!--                            <div class="custom-control custom-radio mt-3">-->
                <!--                                <input type="radio" th:id="|*{name.toLowerCase()}Radio|" name="selection"-->
                <!--                                       class="custom-control-input"-->
                <!--                                       th:value="*{name}">-->
                <!--                                <label class="h4 custom-control-label" th:for="|*{name.toLowerCase()}Radio|"-->
                <!--                                       th:text="*{name}"></label>-->
                <!--                            </div>-->
                <!--                        </th:block>-->
                <!--                    </form>-->
                <!--                </div>-->
                <div class="data col-md-8">
                    <h1 class="text-center font-weight-bold">Products</h1>
                    <div class="products-data"></div>
                </div>
            </div>
            <div class="col-lg-9">

                <div id="carouselExampleIndicators" class="carousel slide my-4" data-ride="carousel">
                    <ol class="carousel-indicators">
                        <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
                        <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
                        <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
                    </ol>
                    <div class="carousel-inner" role="listbox">
                        <div class="carousel-item active">
                            <img class="d-block img-fluid" src="/static/img/engine.jpg" th:src="@{img/engine.jpg}"
                                 alt="First slide">
                        </div>
                        <div class="carousel-item">
                            <img class="d-block img-fluid" src="/static/img/lights.jpg" th:src="@{img/lights.jpg}"
                                 alt="Second slide">
                        </div>
                        <div class="carousel-item">
                            <img class="d-block img-fluid" src="/static/img/suspension.jpg"
                                 th:src="@{img/suspension.jpg}" alt="Third slide">
                        </div>
                    </div>
                    <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                        <span class="sr-only">Previous</span>
                    </a>
                    <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        <span class="sr-only">Next</span>
                    </a>
                </div>

                <div class="row">

                    <div class="col-lg-4 col-md-6 mb-4">
                        <div class="card h-100">
                            <a href="#"><img class="card-img-top" src="http://placehold.it/700x400" alt=""></a>
                            <div class="card-body">
                                <h4 class="card-title">
                                    <a href="#">Item One</a>
                                </h4>
                                <h5>$24.99</h5>
                                <p class="card-text">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Amet
                                    numquam
                                    aspernatur!</p>
                            </div>
                            <div class="card-footer">
                                <small class="text-muted">&#9733; &#9733; &#9733; &#9733; &#9734;</small>
                            </div>
                        </div>
                    </div>

                    <div class="col-lg-4 col-md-6 mb-4">
                        <div class="card h-100">
                            <a href="#"><img class="card-img-top" src="http://placehold.it/700x400" alt=""></a>
                            <div class="card-body">
                                <h4 class="card-title">
                                    <a href="#">Item Two</a>
                                </h4>
                                <h5>$24.99</h5>
                                <p class="card-text">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Amet
                                    numquam
                                    aspernatur! Lorem ipsum dolor sit amet.</p>
                            </div>
                            <div class="card-footer">
                                <small class="text-muted">&#9733; &#9733; &#9733; &#9733; &#9734;</small>
                            </div>
                        </div>
                    </div>

                    <div class="col-lg-4 col-md-6 mb-4">
                        <div class="card h-100">
                            <a href="#"><img class="card-img-top" src="http://placehold.it/700x400" alt=""></a>
                            <div class="card-body">
                                <h4 class="card-title">
                                    <a href="#">Item Three</a>
                                </h4>
                                <h5>$24.99</h5>
                                <p class="card-text">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Amet
                                    numquam
                                    aspernatur!</p>
                            </div>
                            <div class="card-footer">
                                <small class="text-muted">&#9733; &#9733; &#9733; &#9733; &#9734;</small>
                            </div>
                        </div>
                    </div>

                    <div class="col-lg-4 col-md-6 mb-4">
                        <div class="card h-100">
                            <a href="#"><img class="card-img-top" src="http://placehold.it/700x400" alt=""></a>
                            <div class="card-body">
                                <h4 class="card-title">
                                    <a href="#">Item Four</a>
                                </h4>
                                <h5>$24.99</h5>
                                <p class="card-text">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Amet
                                    numquam
                                    aspernatur!</p>
                            </div>
                            <div class="card-footer">
                                <small class="text-muted">&#9733; &#9733; &#9733; &#9733; &#9734;</small>
                            </div>
                        </div>
                    </div>

                    <div class="col-lg-4 col-md-6 mb-4">
                        <div class="card h-100">
                            <a href="#"><img class="card-img-top" src="http://placehold.it/700x400" alt=""></a>
                            <div class="card-body">
                                <h4 class="card-title">
                                    <a href="#">Item Five</a>
                                </h4>
                                <h5>$24.99</h5>
                                <p class="card-text">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Amet
                                    numquam
                                    aspernatur! Lorem ipsum dolor sit amet.</p>
                            </div>
                            <div class="card-footer">
                                <small class="text-muted">&#9733; &#9733; &#9733; &#9733; &#9734;</small>
                            </div>
                        </div>
                    </div>

                    <div class="col-lg-4 col-md-6 mb-4">
                        <div class="card h-100">
                            <a href="#"><img class="card-img-top" src="http://placehold.it/700x400" alt=""></a>
                            <div class="card-body">
                                <h4 class="card-title">
                                    <a href="#">Item Six</a>
                                </h4>
                                <h5>$24.99</h5>
                                <p class="card-text">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Amet
                                    numquam
                                    aspernatur!</p>
                            </div>
                            <div class="card-footer">
                                <small class="text-muted">&#9733; &#9733; &#9733; &#9733; &#9734;</small>
                            </div>
                        </div>
                    </div>

                </div>


            </div>


        </div>


    </div>


    <footer class="py-5 bg-dark">
        <th:block th:include="~{fragments/footer}"></th:block>


    </footer>


    <script th:src="@{/js/jquery.min.js}"></script>
    <script th:src="@{/js/bootstrap.bundle.min.js}"></script>

    <script>
        function formatProduct(product) {
            return '<div class="product">'
                + '<div class="text-center">'
                + `<a href="/products/details/${product.id}"><img src="${product.imageUrl}" class="product-image-home img-thumbnail px-auto" alt="Image not loaded..."/></a>`
                + '</div>'
                + `<h5 class="text-center font-weight-bold mt-3">Name: ${product.name}</h5>`
                + `<h5 class="text-center font-weight-bold">Price: ${product.price.toFixed(2)}</h5>`
                + '</div>'
        }

        $('input[type=radio][name=selection]').change(function () {
            let category = $(this).val();

            fetch('http://localhost:8000/products/fetch/' + category)
                .then((response) => response.json())
                .then((json) => {
                    $('.products-data').empty();

                    if (json.length === 0) {
                        $('.products-data').append(`<h1 class="text-center font-weight-bold">There are no products in the ${category} category.</h1>`)
                    } else {
                        for (let i = 0; i < json.length; i += 3) {
                            $('.products-data').append('<div class="products-row row d-flex justify-content-around mt-5">');
                            if (i < json.length) $('.products-data .products-row:last-child').append(formatProduct(json[i]));
                            if (i + 1 < json.length) $('.products-data .products-row:last-child').append(formatProduct(json[i + 1]));
                            if (i + 2 < json.length) $('.products-data .products-row:last-child').append(formatProduct(json[i + 2]));
                        }
                    }
                })
        });
    </script>
</div>
</body>
</html>
